apiVersion: v1
kind: ConfigMap
metadata:
  name: llm-router-config
  namespace: tas-llm-router
  labels:
    app: llm-router
data:
  # Server Configuration
  LLM_ROUTER_PORT: "8086"
  LLM_ROUTER_LOG_LEVEL: "info"
  LLM_ROUTER_LOG_FORMAT: "json"
  LLM_ROUTER_DEFAULT_STRATEGY: "cost_optimized"

  # Redis Configuration (Shared)
  REDIS_URL: "redis://redis-shared.tas-shared:6379"
  REDIS_DB: "0"

  # PostgreSQL Configuration (Shared)
  DATABASE_URL: "postgres://tasuser:taspassword@postgres-shared.tas-shared:5432/tas_shared"
  DATABASE_MAX_CONNECTIONS: "20"
  DATABASE_TIMEOUT: "30s"

  # Monitoring & Observability
  PROMETHEUS_URL: "http://prometheus-shared.tas-shared:9090"
  OTEL_EXPORTER_OTLP_ENDPOINT: "http://otel-collector-shared.tas-shared:4317"
  OTEL_SERVICE_NAME: "llm-router"
  OTEL_SERVICE_VERSION: "1.0.0"
  OTEL_RESOURCE_ATTRIBUTES: "deployment.environment=production"

  # Kafka Configuration
  KAFKA_BROKERS: "kafka-shared.tas-shared:9092"
  KAFKA_TOPIC_PREFIX: "llm-router"

  # Rate Limiting
  RATE_LIMIT_ENABLED: "true"
  RATE_LIMIT_REQUESTS_PER_MINUTE: "60"
  RATE_LIMIT_BURST_SIZE: "10"

  # Caching & Performance
  CACHE_ENABLED: "true"
  CACHE_DEFAULT_TTL: "300s"
  CACHE_MAX_SIZE: "1000"
  CONNECTION_POOL_MAX_SIZE: "100"
  CONNECTION_POOL_MAX_IDLE: "10"
  CONNECTION_POOL_TIMEOUT: "30s"
  COMPRESSION_ENABLED: "true"
  COMPRESSION_LEVEL: "6"

  # Analytics
  ANALYTICS_ENABLED: "true"
  ANALYTICS_BATCH_SIZE: "100"
  ANALYTICS_FLUSH_INTERVAL: "60s"
  ANALYTICS_RETENTION_DAYS: "90"

  # Environment
  ENVIRONMENT: "production"
  HEALTH_CHECK_ENABLED: "true"
  HEALTH_CHECK_INTERVAL: "30s"
  HEALTH_CHECK_TIMEOUT: "5s"
  SHUTDOWN_TIMEOUT: "30s"

  # Feature Flags
  FEATURE_ADVANCED_ROUTING: "true"
  FEATURE_CIRCUIT_BREAKER: "true"
  FEATURE_REQUEST_DEDUPLICATION: "true"
  FEATURE_OPENAI_ASSISTANTS: "true"
  FEATURE_MULTIMODAL_OPTIMIZATION: "true"
